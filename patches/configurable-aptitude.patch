From: Marc Sherman <msherman@projectile.ca>

--- /usr/sbin/cron-apt.orig	2004-12-25 11:53:47.000000000 -0500
+++ /usr/sbin/cron-apt	2004-12-26 11:00:16.000000000 -0500
@@ -18,6 +18,8 @@
 # Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
 #
 # Changes:
+#	2004-12-25 Marc Sherman <msherman@projectile.ca>
+#		Added configurable support for aptitude instead of apt-get.
 #	2004-09-23 Ola Lundqvist <opal@debian.org>
 #		Escaped changes file data so '/' can be used in action.d lines.
 #	2004-09-19 Marc Haber <mh+debian-bugs@zugschlus.de>
@@ -131,6 +133,7 @@
 TEMP="$TMPDIR/temp"
 MAIL="$TMPDIR/mail"
 DIFF="$TMPDIR/difftemp"
+FILTER="$TMPDIR/filtertemp"
 STATUS="$TMPDIR/status"
 
 LOCKFILE="$LIBDIR/lockfile"
@@ -160,11 +163,17 @@
 # verbose, error
 DEBUG="verbose"
 # general options
-OPTIONS="-q"
+OPTIONS="-o quiet=1"
 # do always run as default
 DONTRUN=""
 # Random sleep time before run
 RUNSLEEP="3600"
+# The command to use (can be aptitude instead)
+APTCOMMAND="/usr/bin/apt-get"
+# If FILTERCTRLM is "true", then any line containing ^M in the apt-get
+# output will be filtered from log/mail/console output.  This is useful
+# with aptitude, which does not currently support -qq (very quiet).
+FILTERCTRLM="false"
 
 export DEBIAN_FRONTEND="noninteractive"
 export LANG="C"
@@ -232,6 +241,9 @@
     if [ -f "$DIFF" ] ; then
 	rm -f "$DIFF"
     fi
+    if [ -f "$FILTER" ] ; then
+    	rm -f "$FILTER"
+    fi
     if [ -d "$TMPDIR" ] ; then
 	rmdir "$TMPDIR"
     fi
@@ -390,7 +402,7 @@
 			else
 			    UMASK_SAVE=$(umask)
 			    umask $UMASK_RELAXED
-			    apt-get $OPTIONS $LINE >> $TEMP 2>&1
+			    $APTCOMMAND $OPTIONS $LINE >> $TEMP 2>&1
 			    RET=$?
 			    umask $UMASK_SAVE
 			fi
@@ -402,10 +414,14 @@
 			fi
 			UMASK_SAVE=$(umask)
 			umask $UMASK_RELAXED
-			apt-get $OPTIONS $LINE >> $TEMP 2>&1
+			$APTCOMMAND $OPTIONS $LINE >> $TEMP 2>&1
 			RET=$?
 			umask $UMASK_SAVE
 		    fi
+		    if [ "$FILTERCTRLM" == "true" ]; then
+		    	grep -v "" "$TEMP" > "$FILTER"
+			cp "$FILTER" "$TEMP"
+		    fi
 		    if [ $RET -ne 0 ]; then
 		        # ---
 			# An error has occured.
--- /etc/cron-apt/config.orig	2004-12-25 11:49:41.000000000 -0500
+++ /etc/cron-apt/config	2004-12-26 10:49:07.000000000 -0500
@@ -3,6 +3,19 @@
 # This shows the defaults.
 #
 
+# The command used to execute all actions.  By default, apt-get is used.
+# Change this to /usr/bin/aptitude to use aptitude instead, which will
+# resolve changed Recommends (and Suggests as well, if aptitude is so
+# configured).
+# APTCOMMAND=/usr/bin/apt-get
+APTCOMMAND=/usr/bin/aptitude
+
+# If FILTERCTRLM is "true", then any line containing ^M in the apt-get
+# output will be filtered from log/mail/console output.  This is useful
+# with aptitude, which does not currently support -qq (very quiet).
+# FILTERCTRLM="false"
+FILTERCTRLM="true"
+
 # A path is needed for this to work. This is the default PATH.
 # export PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin
 
@@ -105,9 +118,10 @@
 DIFFONCHANGES=prepend
 
 # General apt options that will be passed to all apt-get calls.
-# OPTIONS="-q"
+# Use "-o quiet" instead of "-q" for aptitude compatibility.
+# OPTIONS="-o quiet=1"
 # You can for example add an alternative sources.list file here.
-# OPTIONS="-q -o Dir::Etc::SourceList=/etc/apt/security.sources.list"
+# OPTIONS="-o quiet=1 -o Dir::Etc::SourceList=/etc/apt/security.sources.list"
 
 # Do not run the command, if there is an error in the previous run (default).
 # Value: error   (do not run if there is an error on last run)
--- /etc/cron-apt/action.d/0-update.orig	2004-12-25 12:14:48.000000000 -0500
+++ /etc/cron-apt/action.d/0-update	2004-12-25 12:15:11.000000000 -0500
@@ -1 +1 @@
-update -qq
+update -o quiet=2
--- /etc/cron-apt/action.d/3-download.orig	2004-12-25 12:15:21.000000000 -0500
+++ /etc/cron-apt/action.d/3-download	2004-12-25 12:21:25.000000000 -0500
@@ -1,2 +1,2 @@
 autoclean -y
-dist-upgrade -d -u -y
+dist-upgrade -d -y -o APT::Get::Show-Upgraded=true
